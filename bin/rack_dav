#!/usr/bin/env ruby

$:.unshift(File.expand_path("../../lib", __FILE__))

require 'rack_dav'
require 'puma'
require 'rack/handler/puma'

root=ARGV[1] || Dir.pwd
port = ARGV[0] || 3000

app = Rack::Builder.new do
  use Rack::ShowExceptions
  use Rack::CommonLogger
  use Rack::Reloader
  use Rack::Lint

  run RackDAV::Handler.new(:root => root)

end.to_app

Rack::Handler::Puma.run(app, :Port => port)
